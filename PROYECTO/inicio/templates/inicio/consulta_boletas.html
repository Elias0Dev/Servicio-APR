{% extends 'inicio/base.html' %}
{% block title %}
<title>Detalle Boletas - Servicio APR</title>
{% endblock %}
{% load static %}
{% block css %}
<link rel="stylesheet" href="{% static 'inicio/css/style.css' %}">
{% endblock %}

{%block js%}
 <script src="{% static 'inicio/js/script.js'%}"></script>
{%endblock%}



{% block contenido %}
<!-- Se envia codigo a la etiqueta <body> -->
<div class="container">
    <div style="display: flex; flex-direction: row; justify-content: space-between;">
        <h1>Detalle de Boleta</h1>
    </div>
    
    <hr>
    <div class="search-section">
        <label for="cliente">Número de Cliente:</label>
        <input type="number" id="cliente" placeholder="Ingresa tu número de cliente">
        <button id="buscar">Buscar</button>
    </div>

    <!-- Mensaje de error -->
    <div id="error-message" class="alert alert-danger hidden"></div>
    <div>
        <!-- Contenedor para el nuevo gráfico de consumo (inicialmente oculto) -->
        <div id="grafico-consumo-container" class="consumo-card hidden">
            <h5 id="consumo-periodo" class="card-title"></h5>
            <p class="text-muted">Tu consumo del último período registrado.</p>
            <div class="text-center my-3">
            <span id="consumo-valor" class="consumo-valor"></span>
            <p id="consumo-limite" class="consumo-limite"></p>
            </div>
            <div class="progress-label">
            <span>Progreso del mes</span>
            <span id="progreso-porcentaje" class="fw-bold"></span>
            </div>
            <div class="progress">
            <div id="progreso-barra" class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
        </div>
        <!-- Fin del contenedor del gráfico -->

        <div id="resultados" class="hidden">
            <h4 id="nombre-cliente-display" class="mt-4 mb-3"></h4>
            <hr>
            <table id="tabla-boletas" class="table table-bordered table-hover table-responsive-sm" border="1">
                <thead>
                    <tr>
                        <th scope="col">N° Factura</th>
                        <th scope="col">Consumido (m³)</th>
                        <th scope="col">Fecha de Emisión</th>
                        <th scope="col">Total a Pagar($)</th>
                        <th scope="col">Acción</th>
                    </tr>
                </thead>
                <tbody id="cuerpo-tabla">
                    <!-- Las filas se agregarán aquí dinámicamente -->
                </tbody>
            </table>
        </div>
    </div>
    
</div>


{% endblock %}
